# Отчет по курсовому проекту
## по курсу "Логическое программирование"

### студент: Иванопуло А.Б.

## Результат проверки

| Преподаватель     | Дата         |  Оценка       |
|-------------------|--------------|---------------|
| Сошников Д.В. |              |               |
| Левинская М.А.|              |               |

> *Комментарии проверяющих (обратите внимание, что более подробные комментарии возможны непосредственно в репозитории по тексту программы)*

## Введение

Опишите, какие знания и навыки вы получите в результате выполнения курсового проекта

## Задание

 1. Создать родословное дерево своего рода на несколько поколений (3-4) назад в стандартном формате GEDCOM с использованием сервиса MyHeritage.com 
 2. Преобразовать файл в формате GEDCOM в набор утверждений на языке Prolog, используя следующее представление: ...
 3. Реализовать предикат проверки/поиска .... 
 4. Реализовать программу на языке Prolog, которая позволит определять степень родства двух произвольных индивидуумов в дереве
 5. [На оценки хорошо и отлично] Реализовать естественно-языковый интерфейс к системе, позволяющий задавать вопросы относительно степеней родства, и получать осмысленные ответы. 

## Получение родословного дерева

Опишите, как вы получили родословное дерево в формате GEDCOM, сколько в нем индивидуумов.

Я составил свою родословную на сайте myheritage.com, далее скачал дерево с сайта в формате .ged. Дерево состоит из 17 человек и 4 поколений. Ниже прикреплен соответствующий файл.

## Конвертация родословного дерева

Опишите, какой язык/языки вы решили использовать для решения этой задачи и почему. Опишите принцип действия программы и приведите ключевые фрагменты 
программы, позволяющие понять основные моменты решения.

В качестве языка я выбрал Python, так как с помощью него удобно обрабатывать текст и он поддерживает императивную парадигму программирования, что мне знакомо, так как я изучал Си на прошлом курсе. Ниже приведен код программы:

Вариант 4.
Описание программы:

Важная информация с моего дерева будет хранится в словаре, доступ будет осуществлятся по ключу - id, который присвоен каждому члену дерева. В словаре FamilyList будут находится словари типа Person, к которым можно обращаться по id. В 
них содержится обязательная информация об их имени и пола(ключи name, sex) и если у них есть дети, то дополнительно добавляется ключ child.
Таким образом получим некоторое подобие базы данных/таблицы, где обратившись по уникальному id человека можно узнать о нем соответсвующую информацию

f = open('tree.ged', encoding='utf-8')
FamilyList = {}
Person = dict.fromkeys(['name', 'sex']) 
 
for line in f:#построчно обрабатывает текстовый файл
    parts = line.split()#каждую строчку делим на части по пробелам и копируем в список 
    if parts[0] == '0' and parts[-1] == 'INDI':#0 и INDI в файле gedcom означают начало описания участника дерева. 
        key = parts[1] #между ними лежит id человека
        FamilyList[key] = dict.copy(Person)#добавляем его в список
    if parts[0] == '1' and parts[1] == 'NAME':#и заполняем
        Person['name'] = parts[2]
    if parts[0] == '1' and parts[1] == 'SEX':
        Person['sex'] = parts[2]
        FamilyList[key] = dict.copy(Person)# в конце переносим собранную инфу по ключу-id этого человека
    if parts[0] == '0' and parts[-1] == 'FAM':#вторая часть файла состоит из информации о семьях 0 и FAM означают начало описания семьи
        keys = []#создаем список ключей-id
    if parts[0] == '1' and parts[1] == 'HUSB':# добавляем id жены и мужа в список keys
        keys.append(parts[-1])
    if parts[0] == '1' and parts[1] == 'WIFE':
        keys.append(parts[-1])
    if parts[0] == '1' and parts[1] == 'CHIL':
        child = (FamilyList[parts[2]]['name'])#по id ребенка находим его имя и присваиваем переменной child
        for i in keys:                        
            if 'children' not in FamilyList[i]:#по id мужа и жены добавляем ключ children(если его нет)
                FamilyList[i]['children'] = list()#по ключу хранится список(так как детей может быть много)
            FamilyList[i]['children'].append(child) #добавляем имя найденного ребенка в children
f.close()
output = open('tree.pl', 'w', encoding='utf-8')#далее записываем информацию в файл .pl в виде предикатов согласно заданию
for i in FamilyList.keys():
    if 'children' in FamilyList[i]:
        for x in FamilyList[i]['children']:
            if FamilyList[i]['sex'] == 'M':
                output.write("father(" + FamilyList[i]['name'].lower() + "," + x.lower() + ").\n")
            else:
                output.write("mother(" + FamilyList[i]['name'].lower() + "," + x.lower() + ").\n")
output.close()


## Предикат поиска родственника

Опишите, как устроен предикат поиска родственника, приведите его исходный код и примеры запросов/ответов (протокол работы).

## Определение степени родства

Приведите описание метода решения, важные фрагменты исходного кода, протокол работы.

## Естественно-языковый интерфейс

## Выводы

Сформулируйте *содержательные* выводы по курсовому проекту в целом. Чему он вас научила? 
Над чем заставила задуматься? Помните, что несодержательные выводы -
самая частая причина снижения оценки.
